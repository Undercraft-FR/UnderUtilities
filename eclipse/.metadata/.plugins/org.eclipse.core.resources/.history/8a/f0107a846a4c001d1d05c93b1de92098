package fr.skhr.loyto.SKHRTab.common;

import java.awt.Color;
import java.util.ArrayList;
import java.util.List;

import org.lwjgl.opengl.GL11;

import cpw.mods.fml.common.FMLCommonHandler;
import cpw.mods.fml.common.Mod;
import cpw.mods.fml.common.Mod.EventHandler;
import cpw.mods.fml.common.Mod.Instance;
import cpw.mods.fml.common.SidedProxy;
import cpw.mods.fml.common.event.FMLInitializationEvent;
import cpw.mods.fml.common.event.FMLPostInitializationEvent;
import cpw.mods.fml.common.event.FMLPreInitializationEvent;
import cpw.mods.fml.common.eventhandler.EventPriority;
import cpw.mods.fml.common.eventhandler.SubscribeEvent;
import fr.skhr.loyto.SKHRTab.proxy.CommonProxy;
import net.minecraft.client.Minecraft;
import net.minecraft.client.entity.AbstractClientPlayer;
import net.minecraft.client.gui.Gui;
import net.minecraft.client.gui.GuiIngame;
import net.minecraft.client.gui.GuiPlayerInfo;
import net.minecraft.client.network.NetHandlerPlayClient;
import net.minecraft.scoreboard.ScorePlayerTeam;
import net.minecraft.scoreboard.Team;
import net.minecraft.util.ResourceLocation;
import net.minecraftforge.client.event.RenderGameOverlayEvent;
import net.minecraftforge.common.MinecraftForge;
import net.minecraftforge.common.config.Configuration;

@Mod(modid = "SKHRTab", name = "Tab serveur", version = "1.0.0")
public class SKHRTab {
	public static final String MODID = "SKHRTab";
	
	@SidedProxy(clientSide = "fr.skhr.loyto.SKHRTab.proxy.ClientProxy", serverSide = "fr.skhr.loyto.SKHRTab.proxy.CommonProxy")
	public static CommonProxy proxy;
	
	@Instance("modtutoriel")
    public static SKHRTab instance;
	
	//Default tab header-footer
	String header = "Voici le Header";
	static String footer = "Voici le Footer";

	@EventHandler
    public void preInit(FMLPreInitializationEvent event)
    {
		//Configuration
		Configuration cfg = new Configuration(event.getSuggestedConfigurationFile());
		try
		{
		    cfg.load();
		}
		catch(Exception ex)
		{
		    System.out.println("[SKHR-Tab] Impossible de charger le fichier de configuration");
		}
		finally
		{
		    if(cfg.hasChanged())
		    {
		        cfg.save();
		    }
		}

		footer = cfg.get("tab" , "footer", footer).getString();
		header = cfg.get("tab" , "header", header).getString();
		cfg.save();
    }
    	
    @EventHandler
    public void init(FMLInitializationEvent event)
    {
    	proxy.registerRender();
    	MinecraftForge.EVENT_BUS.register(this);
    	
    	FMLCommonHandler.instance().bus().register(new EventHandler());
        MinecraftForge.EVENT_BUS.register(new EventHandler());
    }
    	
    @EventHandler
    public void postInit(FMLPostInitializationEvent event)
    {
    	
    }
    
    @SuppressWarnings("null")
	@SubscribeEvent(priority = EventPriority.HIGH)
    public void eventHandler(RenderGameOverlayEvent.Pre event) {
    	//Event affichage du playerList (tab)
    	if (event.type == RenderGameOverlayEvent.ElementType.PLAYER_LIST) {
    		
    	}
    }
}
