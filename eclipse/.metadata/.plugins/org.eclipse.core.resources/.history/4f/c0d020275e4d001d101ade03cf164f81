package fr.skhr.loyto.UnderUtilities.client;

import net.minecraft.client.entity.AbstractClientPlayer;
import net.minecraft.client.entity.EntityPlayerSP;
import net.minecraft.client.model.ModelBase;
import net.minecraft.client.model.ModelBiped;
import net.minecraft.client.renderer.entity.RenderPlayer;
import net.minecraft.entity.EntityLivingBase;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.item.EnumAction;
import net.minecraft.item.ItemStack;
import net.minecraft.util.ResourceLocation;

public class underRenderPlayer extends RenderPlayer {
	private static final ResourceLocation steveTextures = new ResourceLocation("textures/entity/steve.png");
    public ModelBiped modelBipedMain;
    public ModelBiped modelArmorChestplate;
    public ModelBiped modelArmor;
    
    public underRenderPlayer() {
        this.modelBipedMain = (ModelBiped)this.mainModel;
        this.modelArmorChestplate = new ModelBiped(1.0F);
        this.modelArmor = new ModelBiped(0.5F);
    }
    
    public void doRender(AbstractClientPlayer playerAbs, double x, double y, double z, float yaw, float partialRenderTick) {
    	ResourceLocation steveTextures = new ResourceLocation("textures/entity/steve.png");
    	
		ItemStack itemstack = playerAbs.inventory.getCurrentItem();
		
		if (itemstack != null && playerAbs.getItemInUseCount() > 0)
        {
            EnumAction enumaction = itemstack.getItemUseAction();

            if (enumaction == EnumAction.block)
            {
                modelArmorChestplate.heldItemRight = modelArmor.heldItemRight = modelBipedMain.heldItemRight = 3;
            }
            else if (enumaction == EnumAction.bow)
            {
                modelArmorChestplate.aimedBow = modelArmor.aimedBow = modelBipedMain.aimedBow = true;
            }
        }
		
		modelArmorChestplate.isSneak = modelArmor.isSneak = modelBipedMain.isSneak = playerAbs.isSneaking();
        double d3 = player.posY - (double)playerAbs.yOffset;

        if (playerAbs.isSneaking() && !(playerAbs instanceof EntityPlayerSP))
        {
            d3 -= 0.125D;
        }
        
        super.doRender((EntityLivingBase)playerAbs, player.posX, d3, player.posZ, player.getRotationYawHead(), event.partialRenderTick);
    }
}
